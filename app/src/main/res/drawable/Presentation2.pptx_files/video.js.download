var video=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t){t.exports=JSON.parse('{"VideoManagerErrors":{"InvalidCreateManager":[{"detail":"Unable To Create Manager In VideoManager.ts/createClient. "}],"InvalidVideoUrlError":[{"detail":"Invalid Video URL: "}]}}')},function(t,e,i){"use strict";i.r(e),i.d(e,"pptVideoFactoryGlobal",(function(){return y}));var n={info:function(t){},error:function(t){}};var r=i(0);function o(t){if(""===t)return"";var e=new RegExp("^[a-z+.-]+://([^/:?&]*)","i").exec(t);return null!=e&&e.length>1?e[1]:""}function s(t,e,i,n){void 0===n&&(n=!1);var r=t,o=null==i||""===i,s=r.indexOf("?");if(-1===s)return o?t:r+"?"+e+"="+i;var a=r.substr(s+1);if(0===a.length&&o)return t;var l=function(t,e,i,n){void 0===n&&(n=!1);for(var r=null==i||""===i,o=t,s=t.split("&"),a=(n?e.toLowerCase():e)+"=",l=!1,p=0,u=s;p<u.length;p++){var h=u[p];if(0===(n?h.toLowerCase():h).indexOf(a)){o=o.replace(h,r?"":a+i),l=!0;break}}l||r||(t.length>0&&(o+="&"),o+=a+i);return o}(a,e,i,n);return 0===a.length?r+=l:r=r.replace(a,l),r}var a=function(){function t(t,e,i,n){var r=this;this.player=document.createElement("iframe"),this.player.setAttribute("frameBorder","0"),this.videoURL=e,this.player.src=this.videoURL,this.isUsingIframeAsPosterFrame=i,this.appSettings=n,this.isUsingIframeAsPosterFrame?this.initIframeAsPosterFrameClient():this.player.setAttribute("allow","autoplay"),t.appendChild(this.player),this.player.addEventListener("load",(function(){null!==r.player.contentWindow&&r.player.contentWindow.focus()}))}return t.prototype.play=function(){},t.prototype.pause=function(){},t.prototype.stop=function(){this.isUsingIframeAsPosterFrame?this.player.src=this.videoURL:this.player.src=""},t.prototype.startPlaying=function(){this.isUsingIframeAsPosterFrame?this.player.src=this.setAutoPlayParam():this.player.src=this.videoURL,this.player.style.visibility="visible",this.setFocus()},t.prototype.stopPlaying=function(){this.player.style.visibility="hidden",this.player.style.pointerEvents="none"},t.prototype.getPlayerParentElement=function(){return this.player},t.prototype.getPlayer=function(){return this.player},t.prototype.setFocus=function(){null!==this.player.contentWindow&&this.player.contentWindow.focus()},t.prototype.setAutoPlayParam=function(){if(this.appSettings.IsGFXVideoUrlUtilsEnabled)return"shorts.flipgrid.com"===o(this.videoURL)?s(this.videoURL,"options","autoplay"):s(this.videoURL,"autoplay","true");if(void 0!==window.URLSearchParams){var t=new URL(this.videoURL);return"shorts.flipgrid.com"===t.hostname&&t.searchParams.set("options","autoplay"),t.searchParams.set("autoplay","true"),t.toString()}return this.videoURL},t.prototype.initIframeAsPosterFrameClient=function(){var t=this;this.player.style.visibility="hidden",this.player.addEventListener("load",(function(){t.player.style.visibility="visible"}),{once:!0})},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function l(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var p=function(){function t(t,e,i,n){this.logger=n,this.isDesignerElement=i,this.player=this.createLocalPlayer(t,e,i)}return t.prototype.play=function(){return t=this,e=void 0,n=function(){return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.player.play()];case 1:return t.sent(),[3,3];case 2:return t.sent(),this.logger.info("Error local video play"),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i((function(e){e(t.value)})).then(s,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.prototype.pause=function(){this.player.pause()},t.prototype.startPlaying=function(){!0===this.isDesignerElement&&(this.player.loop=!0),this.player.style.visibility="visible",this.setFocus()},t.prototype.stopPlaying=function(){!0===this.isDesignerElement&&(this.player.loop=!1,this.player.autoplay=!1),this.player.style.pointerEvents="none",this.player.style.visibility="hidden"},t.prototype.stop=function(){this.player.pause(),this.player.currentTime=0},t.prototype.getPlayer=function(){return this.player},t.prototype.setFocus=function(){void 0!==this.player&&this.player.focus()},t.prototype.createLocalPlayer=function(t,e,i){var n=document.createElement("video");return n.controls=!0,n.setAttribute("disablePictureInPicture","true"),n.setAttribute("controlsList","nodownload nofullscreen noremoteplayback"),n.src=e,t.appendChild(n),n.autoplay=!0,n.style.visibility=i?"hidden":"visible",i?(n.loop=!0,n.muted=!0,n.addEventListener("canplay",(function(){n.style.visibility="visible"}),{once:!0})):this.setFocus(),n},t}(),u=function(){function t(t,e){this.playButton=e,this.parent=t}return t.prototype.setPlayButtonVisible=function(){parseFloat(this.parent.style.width)<56.6||parseFloat(this.parent.style.height)<56.6||(this.playButton.setAttribute("visibility","visible"),this.playButton.style.pointerEvents="visible")},t.prototype.setPlayButtonHidden=function(){this.playButton.setAttribute("visibility","hidden")},t.prototype.onSelectPlayButton=function(){if(void 0===this.shapeOverlayElement&&this.findShapeSelectionOverlay(),void 0!==this.shapeOverlayElement){var t=parseFloat(this.parent.style.left)+parseFloat(this.parent.style.width)/2-28.3,e=parseFloat(this.parent.style.top)+parseFloat(this.parent.style.height)/2-28.3;this.playButton.style.top=e.toString()+"px",this.playButton.style.left=t.toString()+"px",this.shapeOverlayElement.appendChild(this.playButton)}},t.prototype.onDeSelectPlayButton=function(){this.playButton.style.top="calc(50% - "+28.3.toString()+"px)",this.playButton.style.left="calc(50% - "+28.3.toString()+"px)",this.parent.appendChild(this.playButton)},t.prototype.findShapeSelectionOverlay=function(){null!==this.parent.parentElement&&void 0!==this.parent.parentElement.getElementsByClassName("ShapeSelectionOverlay")[0]?this.shapeOverlayElement=this.parent.parentElement.getElementsByClassName("ShapeSelectionOverlay")[0]:this.shapeOverlayElement=void 0},t}(),h=function(){function t(t,e,i,r,o,s,a){this.appSettings=a,this.isPlaying=!1,this.isNativeVideo=r,this.isDesignerElement=o,this.parent=t,this.url=e,this.hostName=this.isNativeVideo?"":this.getHostname(e),this.videoToolTip=i,this.videoLibraryCallback=s,this.playButton=this.createPlayButton(),this.playButtonHandler=new u(this.parent,this.playButton),n.info("Video Element Count"),this.isDesignerElement&&this.startPlaying(),"shorts.flipgrid.com"===this.hostName&&(this.createClient(this.url),this.setClientProperties(5,"absolute","none"))}return t.prototype.setPlayButtonHidden=function(){void 0!==this.playButtonHandler&&this.playButtonHandler.setPlayButtonHidden()},t.prototype.setPlayButtonVisible=function(){this.isPlaying||void 0===this.playButtonHandler||(this.playButtonHandler.setPlayButtonVisible(),void 0!==this.client&&"shorts.flipgrid.com"===this.hostName&&(this.client.getPlayer().style.visibility="visible"))},t.prototype.startPlaying=function(){if(this.isNativeVideo&&""===this.url)return this.setPlayButtonHidden(),this.isPlaying=!0,void this.videoLibraryCallback.fetchLocalVideoSrc();void 0===this.client?(this.createClient(this.url),this.setClientProperties(6,"absolute","all")):this.isPlaying||(this.client.startPlaying(),this.client.play(),this.setClientProperties(6,"absolute","all")),void 0!==this.client&&(this.isPlaying=!0),n.info("Video Play Count"),this.setPlayButtonHidden()},t.prototype.stopPlaying=function(){void 0!==this.client&&(this.isPlaying||"shorts.flipgrid.com"!==this.hostName?(this.isPlaying=!1,this.client.stopPlaying(),this.client.stop()):this.client.stopPlaying())},t.prototype.hasClient=function(){return void 0!==this.client},t.prototype.setClientProperties=function(t,e,i){if(void 0!==this.client){var n=this.client.getPlayer();n.style.zIndex=t.toString(),n.style.pointerEvents=i,n.style.position=e,n.style.objectFit="fill",n.style.height="100%",n.style.width="100%"}},t.prototype.setLocalVideoSrc=function(t){this.url=t,(this.videoLibraryCallback.isSelected()||this.isDesignerElement)&&this.startPlaying()},t.prototype.onSelectPlayButton=function(){void 0!==this.playButtonHandler&&this.playButtonHandler.onSelectPlayButton()},t.prototype.onDeSelectPlayButton=function(){void 0!==this.playButtonHandler&&this.playButtonHandler.onDeSelectPlayButton()},t.prototype.dispose=function(){null!==this.playButton&&void 0!==this.playButton&&null!==this.playButton.parentNode&&void 0!==this.playButton.parentNode&&this.playButton.parentNode.removeChild(this.playButton)},t.prototype.createClient=function(t){try{if(this.isNativeVideo)this.client=new p(this.parent,t,this.isDesignerElement,n),n.info("Success Local VideoManager");else{var e=t,i=!1;"www.youtube.com"===this.hostName&&(e+="&enablejsapi=1"),"shorts.flipgrid.com"===this.hostName&&(i=!0),"www.slideshare.net"===this.hostName||i||(e=this.setAutoPlayParam(t)),this.client=new a(this.parent,e,i,this.appSettings),this.client.getPlayer().setAttribute("title",this.videoToolTip),n.info("Success Default VideoManager")}this.setClientProperties(6,"absolute","all")}catch(t){n.info("Error VideoManager: "+r.VideoManagerErrors.InvalidCreateManager[0].detail)}},t.prototype.playButtonOnClick=function(t){void 0!==t&&(t.stopImmediatePropagation(),t.preventDefault()),this.videoLibraryCallback.selectShape(),this.startPlaying()},t.prototype.createPlayButton=function(){var t=this,e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.height=56.6.toString()+"px",e.style.width=56.6.toString()+"px",e.setAttribute("viewBox","-1 -1 2 2"),e.style.position="absolute",e.style.zIndex=6..toString(),e.style.top="calc(50% - "+28.3.toString()+"px)",e.style.left="calc(50% - "+28.3.toString()+"px)",e.style.cursor="pointer",e.style.pointerEvents="all",e.addEventListener("click",(function(e){return t.playButtonOnClick(e)}),!1);var i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttribute("cx","0"),i.setAttribute("cy","0"),i.setAttribute("r","1"),i.setAttribute("fill","#404040");var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M.5 0 L-.25 -.5 L-.25 .5 Z"),n.setAttribute("fill","none"),n.setAttribute("stroke","white"),n.setAttribute("stroke-width",".05"),n.setAttribute("opacity",".5"),e.appendChild(i),e.appendChild(n),this.isDesignerElement&&e.setAttribute("visibility","hidden"),this.parent.appendChild(e),e},t.prototype.getHostname=function(t){return this.appSettings.IsGFXVideoUrlUtilsEnabled?o(t):void 0!==window.URLSearchParams&&""!==t?new URL(t).hostname:""},t.prototype.setAutoPlayParam=function(t){if(this.appSettings.IsGFXVideoUrlUtilsEnabled)return s(t,"autoplay","true");if(void 0!==window.URLSearchParams&&""!==t){var e=new URL(t);return e.searchParams.set("autoplay","true"),e.toString()}return t},t}(),y=new(function(){function t(){}return t.prototype.createEditorPptVideoManager=function(t,e,i,n,r,o,s){return new h(t,e,i,n,r,o,s)},t.prototype.setLogger=function(t){n=t},t}())}]);
//# sourceMappingURL=video.js.map